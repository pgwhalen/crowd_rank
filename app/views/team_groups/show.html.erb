
<div class="well">
	<div class="row-fluid">
		<div class="span8">
			<h2 class="text-center"><%= @team_group.full_name %></h2>
		</div>
		<div class="text-center">
			<% if user_signed_in? %>
				<%= button_to "Rank", new_user_ranking_path(current_user.id), :method => "get", class: "btn btn-large btn-success" %>
			<% else %>
				<button href="#" class="btn btn-large btn-default text-center">Sign up to rank!</button>
			<% end %>
			<br>
		</div>
		<div id="highchart"></div>
	</div>
</div>

<div class="btn-toolbar">
	<div class="btn-group btn-group-sm">
		<button id="show_all" class="btn btn-default">Show all Teams</button>
		<button id="hide_all" class="btn btn-default">Hide all Teams</button>
	</div>
	<div class="btn-group btn-group-sm">
		<button id="show_all" class="btn btn-default">NFC West</button>
		<button id="hide_all" class="btn btn-default">NFC East</button>
	</div>
</div>

<script type="text/javascript">
$(function() {

	var options = {
	  chart: {
	    renderTo: 'highchart',
	    type: 'spline'
	  },
	  title: {
	    text: 'NFL Rankings'
	  },
	  xAxis: {
	    categories: <%= raw @time_periods.to_json %>
	  },
	  yAxis: {
	    title: {
	      text: 'Rank'
	    },
	    reversed: true,
	    min: 0,
	    max: 32
	  },
	  series: <%= raw @series.to_json %>
	};

	var chart = new Highcharts.Chart(options);

	$("#show_all").click(function() {
		// this redraw funny business is for performance reasons, otherwise it takes
		// like a second because it redraws every time.
		var _redraw = chart._redraw;
		chart.redraw = function() {};

		for (var i = 0; i < options.series.length; i++) {
			chart.get(options.series[i].id).show();
		}

		chart.redraw = _redraw;
		chart.redraw();
	});

	$("#hide_all").click(function() {
		var _redraw = chart._redraw;
		chart.redraw = function() {};

		for (var i = 0; i < options.series.length; i++) {
			chart.get(options.series[i].id).hide();
		}

		chart.redraw = _redraw;
		chart.redraw();
	});

});
</script>
